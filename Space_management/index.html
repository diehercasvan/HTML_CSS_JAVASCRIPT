<!DOCTYPE html>
<html lang="es">

<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gesti√≥n de Salones de Clase - v0.6</title>
<!-- Bootstrap 5 CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<!-- Font Awesome -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<!-- SweetAlert2 -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
<!-- Estilos personalizados -->
<link rel="stylesheet" href="css/styles.css">
<style>
/* Estilos de emergencia para diagn√≥stico */
.diagnostico-bar {
background: #f8f9fa;
padding: 5px 15px;
border-bottom: 2px solid #0d6efd;
font-size: 12px;
color: #333;
}

.diagnostico-bar span {
display: inline-block;
margin-right: 15px;
}

.diagnostico-bar .ok {
color: #198754;
font-weight: bold;
}

.diagnostico-bar .error {
color: #dc3545;
font-weight: bold;
}
</style>
</head>

<body>
<!-- Barra de diagn√≥stico visual -->
<div class="diagnostico-bar" id="diagnosticoBar">
<span>üîÑ Cargando scripts...</span>
</div>

<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
<div class="container-fluid">
<a class="navbar-brand" href="#">
<i class="fas fa-chalkboard-teacher"></i> Gesti√≥n de Salones v0.6
</a>
<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
<span class="navbar-toggler-icon"></span>
</button>
<div class="collapse navbar-collapse" id="navbarNav">
<ul class="navbar-nav ms-auto">
<li class="nav-item dropdown">
<a class="nav-link dropdown-toggle text-white" href="#" role="button" data-bs-toggle="dropdown">
<i class="fas fa-database"></i> Datos
</a>
<ul class="dropdown-menu dropdown-menu-end">
<li><button class="dropdown-item" onclick="if(window.guardarSnapshot) guardarSnapshot()"><i
class="fas fa-camera"></i> Guardar Snapshot</button></li>
<li><button class="dropdown-item"
onclick="if(window.mostrarHistorial) mostrarHistorial()"><i
class="fas fa-history"></i> Ver Historial</button></li>
<li>
<hr class="dropdown-divider">
</li>
<li><button class="dropdown-item" onclick="if(window.exportarDatos) exportarDatos()"><i
class="fas fa-download"></i> Descargar JSON</button></li>
<li><button class="dropdown-item"
onclick="if(window.exportarHistorialCompleto) exportarHistorialCompleto()"><i
class="fas fa-archive"></i> Descargar Historial</button></li>
<li><label class="dropdown-item" style="cursor:pointer;"><i class="fas fa-upload"></i>
Cargar JSON<input type="file" id="importarArchivo" accept=".json"
style="display:none;"
onchange="if(window.importarDatos) importarDatos(event)"></label></li>
<li>
<hr class="dropdown-divider">
</li>
<li><button class="dropdown-item"
onclick="if(window.generarReporteCompleto) generarReporteCompleto()"><i
class="fas fa-file-pdf"></i> Reporte</button></li>
<li><button class="dropdown-item text-danger"
onclick="if(window.limpiarTodosLosDatos) limpiarTodosLosDatos()"><i
class="fas fa-trash"></i> Limpiar todo</button></li>
</ul>
</li>
</ul>
</div>
</div>
</nav>

<div class="container-fluid mt-4">
<!-- Pesta√±as -->
<ul class="nav nav-tabs" id="myTab" role="tablist">
<li class="nav-item"><button class="nav-link active" data-bs-toggle="tab" data-bs-target="#responsable"><i
class="fas fa-user"></i> Responsables</button></li>
<li class="nav-item"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#puestos"><i
class="fas fa-chair"></i> Puestos</button></li>
<li class="nav-item"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#equipos"><i
class="fas fa-tv"></i> TV/Proyectores</button></li>
<li class="nav-item"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#sillas"><i
class="fas fa-chair"></i> Sillas</button></li>
<li class="nav-item"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#asistencia"><i
class="fas fa-calendar-check"></i> Asistencia</button></li>
</ul>

<!-- Contenido de pesta√±as -->
<div class="tab-content p-3 border border-top-0 rounded-bottom">
<!-- Responsables -->
<div class="tab-pane fade show active" id="responsable">
<div class="d-flex justify-content-between mb-3">
<h4>Responsables Registrados</h4>
<button class="btn btn-success"
onclick="if(window.mostrarFormularioResponsable) mostrarFormularioResponsable()"><i
class="fas fa-plus"></i> Nuevo</button>
</div>
<div class="table-responsive">
<table class="table table-bordered">
<thead class="table-dark">
<tr>
<th>Curso</th>
<th>Nombre</th>
<th>Documento</th>
<th>Sal√≥n</th>
<th>Fecha</th>
<th>H.Inicio</th>
<th>H.Fin</th>
<th>Estado Sal√≥n</th>
<th>Limpieza</th>
<th>Observaciones</th>
<th>Acciones</th>
</tr>
</thead>
<tbody id="cuerpoTablaResponsables">
<tr>
<td colspan="11" class="text-center">Cargando...</td>
</tr>
</tbody>
</table>
</div>
</div>

<!-- Puestos (versi√≥n simplificada para prueba) -->
<!-- Pesta√±a Puestos -->
<div class="tab-pane fade" id="puestos" role="tabpanel">
<!-- Selector de curso para puestos docentes -->
<div class="row mb-3">
<div class="col-md-4">
<label for="cursoPuestoDocente" class="form-label">Seleccionar Curso para Puesto Docente</label>
<select class="form-select" id="cursoPuestoDocente" onchange="cargarDocentesParaPuesto()">
<option value="">Seleccione un curso</option>
</select>
</div>
</div>

<!-- Puestos del Docente -->
<div class="row">
<div class="col-md-12">
<h4>Puestos del Docente</h4>
<button class="btn btn-success mb-3" onclick="agregarPuestoDocente()">
<i class="fas fa-plus"></i> Agregar Puesto Docente
</button>

<!-- Tabla de puestos docentes -->
<div class="table-responsive">
<table class="table table-striped table-hover table-bordered" id="tablaPuestosDocentes">
<thead class="table-dark">
<tr>
<th>#</th>
<th>Nombre</th>
<th>Documento</th>
<th>Serial PC</th>
<th>Estado PC</th>
<th>Mouse</th>
<th>Teclado</th>
<th>Pantalla</th>
<th>Internet</th>
<th>Limpieza</th>
<th>Observaciones</th>
<th>Acciones</th>
</tr>
</thead>
<tbody id="cuerpoTablaPuestosDocentes">
<tr>
<td colspan="12" class="text-center">Cargando puestos docentes...</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

<!-- Configuraci√≥n de Mesas -->
<div class="row mt-4">
<div class="col-md-12">
<h4>Configuraci√≥n de Mesas</h4>

<!-- Selector de curso para mesas -->
<div class="row mb-3">
<div class="col-md-4">
<label for="cursoMesas" class="form-label">Seleccionar Curso para Mesas</label>
<select class="form-select" id="cursoMesas" onchange="cargarEstudiantesParaMesas()">
<option value="">Seleccione un curso</option>
</select>
</div>
</div>

<!-- Bot√≥n para mostrar/ocultar configuraci√≥n -->
<button class="btn btn-outline-primary mb-3" type="button" data-bs-toggle="collapse"
data-bs-target="#panelConfiguracionMesas" aria-expanded="true">
<i class="fas fa-cog"></i> <span id="toggleConfigText">Ocultar</span> Configuraci√≥n
</button>

<!-- Panel de configuraci√≥n colapsable -->
<div class="collapse show mb-3" id="panelConfiguracionMesas">
<div class="card card-body">
<div class="row">
<div class="col-md-4">
<div class="mb-3">
<label for="filas" class="form-label">N√∫mero de Filas</label>
<input type="number" class="form-control" id="filas" min="1" max="10"
value="3">
</div>
</div>
<div class="col-md-4">
<div class="mb-3">
<label for="columnas" class="form-label">N√∫mero de Columnas (max 6)</label>
<input type="number" class="form-control" id="columnas" min="1" max="6"
value="2">
</div>
</div>
<div class="col-md-4">
<div class="mb-3">
<label for="pcsPorMesa" class="form-label">PCs por Mesa</label>
<input type="number" class="form-control" id="pcsPorMesa" min="1" max="6"
value="2">
</div>
</div>
</div>
<div class="row">
<div class="col-12">
<button class="btn btn-primary" onclick="crearDistribucionMesas()">
<i class="fas fa-table"></i> Crear Distribuci√≥n
</button>
</div>
</div>
</div>
</div>

<!-- Contenedor de mesas -->
<div id="mesasContainer" class="row mt-3">
<p class="text-muted">Seleccione un curso y cree una distribuci√≥n para ver las mesas</p>
</div>
</div>
</div>
</div>

<!-- Equipos (simplificado) -->
<!-- Pesta√±a TV/Proyectores -->
<div class="tab-pane fade" id="equipos" role="tabpanel">
<div class="d-flex justify-content-between align-items-center mb-3">
<h4><i class="fas fa-tv"></i> TV y Proyectores</h4>
<button class="btn btn-success" onclick="agregarEquipo()">
<i class="fas fa-plus"></i> Agregar Equipo
</button>
</div>

<!-- Tabla de equipos -->
<div class="table-responsive">
<table class="table table-striped table-hover table-bordered" id="tablaEquipos">
<thead class="table-dark">
<tr>
<th>#</th>
<th>Tipo</th>
<th>Serial</th>
<th>Estado</th>
<th>Limpieza</th>
<th>Observaciones</th>
<th>Acciones</th>
</tr>
</thead>
<tbody id="cuerpoTablaEquipos">
<tr>
<td colspan="7" class="text-center">Cargando equipos...</td>
</tr>
</tbody>
</table>
</div>
</div>

<!-- Sillas (simplificado) -->
<!-- Pesta√±a Sillas -->
<div class="tab-pane fade" id="sillas" role="tabpanel">
<h4><i class="fas fa-chair"></i> Gesti√≥n de Sillas</h4>

<div class="alert alert-info">
<i class="fas fa-info-circle"></i> Cada silla tiene un serial √∫nico. Un estudiante solo puede tener
UNA silla asignada.
</div>

<div class="row mb-4">
<div class="col-md-6">
<div class="card">
<div class="card-header bg-primary text-white">
<h5 class="mb-0"><i class="fas fa-cog"></i> Configuraci√≥n de Sillas</h5>
</div>
<div class="card-body">
<div class="row">
<div class="col-md-6">
<div class="mb-3">
<label for="cursoSillas" class="form-label">Curso <span
class="text-danger">*</span></label>
<select class="form-select" id="cursoSillas"
onchange="cargarEstudiantesParaSillas()">
<option value="">Seleccione un curso</option>
</select>
</div>
</div>
<div class="col-md-6">
<div class="mb-3">
<label for="numeroSillas" class="form-label">N√∫mero de Sillas</label>
<input type="number" class="form-control" id="numeroSillas" min="1"
max="100" value="12">
</div>
</div>
</div>
<div class="row">
<div class="col-12">
<button class="btn btn-primary me-2" onclick="crearSillas()">
<i class="fas fa-chair"></i> Crear Sillas
</button>
<button class="btn btn-warning me-2" onclick="limpiarSillasCurso()">
<i class="fas fa-eraser"></i> Limpiar Sillas
</button>
<button class="btn btn-success" onclick="asignarSillasAutomaticamente()">
<i class="fas fa-magic"></i> Asignar Autom√°ticamente
</button>
</div>
</div>
</div>
</div>
</div>
<div class="col-md-6">
<div class="card">
<div class="card-header bg-info text-white">
<h5 class="mb-0"><i class="fas fa-chart-pie"></i> Estad√≠sticas</h5>
</div>
<div class="card-body">
<div id="estadisticasSillas">
<p class="text-muted">Seleccione un curso para ver estad√≠sticas</p>
</div>
</div>
</div>
</div>
</div>

<!-- Contenedor de sillas -->
<div id="sillasContainer" class="row">
<p class="text-muted">Seleccione un curso y cree las sillas para visualizarlas</p>
</div>
</div>

<!-- Pesta√±a Asistencia -->
<div class="tab-pane fade" id="asistencia" role="tabpanel">
    <h4><i class="fas fa-calendar-check"></i> Registro de Asistencia</h4>

    <div class="alert alert-success">
        <i class="fas fa-info-circle"></i> Registre la asistencia y uso de uniforme de los estudiantes.
    </div>

    <!-- Filtros -->
    <div class="row mb-4">
        <div class="col-md-4">
            <label for="cursoAsistencia" class="form-label">Seleccionar Curso <span class="text-danger">*</span></label>
            <select class="form-select" id="cursoAsistencia" onchange="cargarAsistenciaPorCurso()">
                <option value="">Seleccione un curso</option>
            </select>
        </div>
        <div class="col-md-4">
            <label for="fechaAsistencia" class="form-label">Fecha <span class="text-danger">*</span></label>
            <input type="date" class="form-control" id="fechaAsistencia" value="">
        </div>
        <div class="col-md-4 d-flex align-items-end">
            <button class="btn btn-primary me-2" onclick="filtrarAsistencia()">
                <i class="fas fa-search"></i> Filtrar
            </button>
            <button class="btn btn-success" onclick="guardarAsistencia()">
                <i class="fas fa-save"></i> Guardar Asistencia
            </button>
        </div>
    </div>

    <!-- Botones de acci√≥n r√°pida -->
    <div class="row mb-3">
        <div class="col-12">
            <button class="btn btn-outline-primary btn-sm me-2" onclick="marcarTodos()">
                <i class="fas fa-check-double"></i> Marcar Todos
            </button>
            <button class="btn btn-outline-secondary btn-sm" onclick="desmarcarTodos()">
                <i class="fas fa-times"></i> Desmarcar Todos
            </button>
        </div>
    </div>

    <!-- Tabla de asistencia -->
    <div class="table-responsive">
        <table class="table table-striped table-hover table-bordered" id="tablaAsistencia">
            <thead class="table-dark">
                <tr>
                    <th>Documento</th>
                    <th>Nombre Completo</th>
                    <th>Silla</th>
                    <th>Serial Silla</th>
                    <th>Asistencia</th>
                    <th>Uniforme</th>
                    <th>Observaciones</th>
                </tr>
            </thead>
            <tbody id="cuerpoTablaAsistencia">
                <tr><td colspan="7" class="text-center">Seleccione un curso y fecha para ver los estudiantes</td></tr>
            </tbody>
        </table>
    </div>
</div>

</div>
</div>

<!-- MODALES M√çNIMOS -->
<!-- Modal para responsable -->
<div class="modal fade" id="modalResponsable" tabindex="-1" aria-labelledby="modalResponsableLabel"
aria-hidden="true">
<div class="modal-dialog modal-lg">
<div class="modal-content">
<div class="modal-header bg-primary text-white">
<h5 class="modal-title" id="modalResponsableLabel">
<i class="fas fa-user"></i> Agregar/Editar Responsable
</h5>
<button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
aria-label="Close"></button>
</div>
<div class="modal-body">
<form id="formResponsable">
<input type="hidden" id="responsableId" value="-1">

<div class="row">
<div class="col-md-6">
<div class="mb-3">
<label for="cursoResponsable" class="form-label">Curso <span
class="text-danger">*</span></label>
<select class="form-select" id="cursoResponsable" required
onchange="cargarDocentesPorCurso()">
<option value="">Seleccione un curso</option>
</select>
</div>
</div>
<div class="col-md-6">
<div class="mb-3">
<label for="docenteResponsable" class="form-label">Docente <span
class="text-danger">*</span></label>
<select class="form-select" id="docenteResponsable" required
onchange="cargarDatosDocente()">
<option value="">Primero seleccione un curso</option>
</select>
</div>
</div>
</div>

<div class="row">
<div class="col-md-6">
<div class="mb-3">
<label for="numeroSalon" class="form-label">N√∫mero de Sal√≥n <span
class="text-danger">*</span></label>
<input type="text" class="form-control" id="numeroSalon" placeholder="Ej: 304"
required>
</div>
</div>
<div class="col-md-6">
<div class="mb-3">
<label for="fecha" class="form-label">Fecha <span
class="text-danger">*</span></label>
<input type="date" class="form-control" id="fecha" required>
</div>
</div>
</div>

<div class="row">
<div class="col-md-6">
<div class="mb-3">
<label for="horarioInicio" class="form-label">Horario inicio <span
class="text-danger">*</span></label>
<input type="time" class="form-control" id="horarioInicio" required>
</div>
</div>
<div class="col-md-6">
<div class="mb-3">
<label for="horarioFin" class="form-label">Horario final <span
class="text-danger">*</span></label>
<input type="time" class="form-control" id="horarioFin" required>
</div>
</div>
</div>

<div class="row">
<div class="col-md-6">
<div class="mb-3">
<label for="nombreResponsable" class="form-label">Nombre del Responsable</label>
<input type="text" class="form-control" id="nombreResponsable" readonly
placeholder="Se cargar√° autom√°ticamente">
</div>
</div>
<div class="col-md-6">
<div class="mb-3">
<label for="documentoResponsable" class="form-label">Documento</label>
<input type="text" class="form-control" id="documentoResponsable" readonly
placeholder="Se cargar√° autom√°ticamente">
</div>
</div>
</div>

<div class="row">
<div class="col-md-6">
<div class="mb-3">
<!-- CORREGIDO: Cambiado de "Estado del Equipo" a "Estado del Sal√≥n" -->
<label for="estadoEquipo" class="form-label">Estado del Sal√≥n <span
class="text-danger">*</span></label>
<select class="form-select" id="estadoEquipo" required>
<option value="Excelente">Excelente</option>
<option value="Bueno">Bueno</option>
<option value="Regular">Regular</option>
<option value="Da√±ado">Da√±ado</option>
</select>
</div>
</div>
<div class="col-md-6">
<div class="mb-3">
<label for="estadoLimpieza" class="form-label">Estado de Limpieza <span
class="text-danger">*</span></label>
<select class="form-select" id="estadoLimpieza" required>
<option value="Excelente">Excelente</option>
<option value="Bueno">Bueno</option>
<option value="Regular">Regular</option>
<option value="Malo">Malo</option>
</select>
</div>
</div>
</div>

<div class="mb-3">
<label for="observaciones" class="form-label">Observaciones</label>
<textarea class="form-control" id="observaciones" rows="3"
placeholder="Observaciones adicionales..."></textarea>
</div>
</form>
</div>
<div class="modal-footer">
<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
<i class="fas fa-times"></i> Cancelar
</button>
<button type="button" class="btn btn-primary" onclick="guardarResponsable()">
<i class="fas fa-save"></i> Guardar
</button>
</div>
</div>
</div>
</div>

<!-- Modal para puesto docente -->
<div class="modal fade" id="modalPuestoDocente" tabindex="-1">
<div class="modal-dialog modal-lg">
<div class="modal-content">
<div class="modal-header bg-primary text-white">
<h5 class="modal-title">Agregar Puesto Docente</h5>
<button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
</div>
<div class="modal-body">
<!-- Informaci√≥n del curso seleccionado -->
<div class="alert alert-info" id="infoCursoPuesto" style="display: none;">
<i class="fas fa-info-circle"></i> Curso seleccionado: <span
id="cursoPuestoSeleccionado"></span>
</div>

<form id="formPuestoDocente">
<div class="row">
<div class="col-md-6">
<div class="mb-3">
<label for="selectDocente" class="form-label">Seleccionar Docente</label>
<select class="form-select" id="selectDocente" required
onchange="cargarDatosDocentePuesto()">
<option value="">Primero seleccione un curso</option>
</select>
</div>
</div>
<div class="col-md-6">
<div class="mb-3">
<label for="documentoDocente" class="form-label">Documento</label>
<input type="text" class="form-control" id="documentoDocente" readonly>
</div>
</div>
</div>

<div class="row">
<div class="col-md-6">
<div class="mb-3">
<label for="serialPC" class="form-label">Serial del PC</label>
<input type="text" class="form-control" id="serialPC" required>
</div>
</div>
<div class="col-md-6">
<div class="mb-3">
<label for="estadoPC" class="form-label">Estado del PC</label>
<select class="form-select" id="estadoPC" required>
<option value="Excelente">Excelente</option>
<option value="Bueno">Bueno</option>
<option value="Regular">Regular</option>
<option value="Da√±ado">Da√±ado</option>
</select>
</div>
</div>
</div>

<div class="row">
<div class="col-md-4">
<div class="mb-3">
<label class="form-label">Mouse</label>
<select class="form-select" id="mousePC">
<option value="Excelente">Excelente</option>
<option value="Bueno">Bueno</option>
<option value="Regular">Regular</option>
<option value="Da√±ado">Da√±ado</option>
<option value="No tiene">No tiene</option>
</select>
</div>
</div>
<div class="col-md-4">
<div class="mb-3">
<label class="form-label">Teclado</label>
<select class="form-select" id="tecladoPC">
<option value="Excelente">Excelente</option>
<option value="Bueno">Bueno</option>
<option value="Regular">Regular</option>
<option value="Da√±ado">Da√±ado</option>
<option value="No tiene">No tiene</option>
</select>
</div>
</div>
<div class="col-md-4">
<div class="mb-3">
<label class="form-label">Pantalla</label>
<select class="form-select" id="pantallaPC">
<option value="Excelente">Excelente</option>
<option value="Bueno">Bueno</option>
<option value="Regular">Regular</option>
<option value="Da√±ado">Da√±ado</option>
<option value="No tiene">No tiene</option>
</select>
</div>
</div>
</div>

<div class="row">
<div class="col-md-6">
<div class="mb-3">
<label class="form-label">Internet</label>
<select class="form-select" id="internet">
<option value="Funciona">Funciona</option>
<option value="No funciona">No funciona</option>
<option value="Lento">Lento</option>
</select>
</div>
</div>
<div class="col-md-6">
<div class="mb-3">
<label class="form-label">Estado de Limpieza</label>
<select class="form-select" id="estadoLimpiezaPC">
<option value="Excelente">Excelente</option>
<option value="Bueno">Bueno</option>
<option value="Regular">Regular</option>
<option value="Malo">Malo</option>
</select>
</div>
</div>
</div>

<div class="mb-3">
<label for="observacionesPC" class="form-label">Observaciones</label>
<textarea class="form-control" id="observacionesPC" rows="3"></textarea>
</div>
</form>
</div>
<div class="modal-footer">
<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
<button type="button" class="btn btn-primary" onclick="guardarPuestoDocente()">Guardar</button>
</div>
</div>
</div>
</div>
<!-- Modal para equipo (TV/Proyectores) -->
<div class="modal fade" id="modalEquipo" tabindex="-1">
<div class="modal-dialog">
<div class="modal-content">
<div class="modal-header bg-primary text-white">
<h5 class="modal-title">
<i class="fas fa-tv"></i> Agregar/Editar Equipo
</h5>
<button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
</div>
<div class="modal-body">
<form id="formEquipo">
<input type="hidden" id="equipoIndex" value="-1">

<!-- Tipo de Equipo -->
<div class="mb-3">
<label for="equipoTipo" class="form-label">Tipo de Equipo <span
class="text-danger">*</span></label>
<select class="form-select" id="equipoTipo" required>
<option value="">Seleccione un tipo</option>
<option value="TV">TV</option>
<option value="Proyector">Proyector</option>
<option value="Smart TV">Smart TV</option>
<option value="Video Beam">Video Beam</option>
<option value="Monitor">Monitor</option>
<option value="Parlantes">Parlantes</option>
</select>
</div>

<!-- Serial -->
<div class="mb-3">
<label for="equipoSerial" class="form-label">Serial del Equipo <span
class="text-danger">*</span></label>
<input type="text" class="form-control" id="equipoSerial"
placeholder="Ej: TV-001, PROY-12345" required>
</div>

<!-- Estado -->
<div class="mb-3">
<label for="equipoEstado" class="form-label">Estado <span
class="text-danger">*</span></label>
<select class="form-select" id="equipoEstado" required>
<option value="Excelente">Excelente</option>
<option value="Bueno">Bueno</option>
<option value="Regular">Regular</option>
<option value="Da√±ado">Da√±ado</option>
</select>
</div>

<!-- Estado de Limpieza -->
<div class="mb-3">
<label for="equipoLimpieza" class="form-label">Estado de Limpieza <span
class="text-danger">*</span></label>
<select class="form-select" id="equipoLimpieza" required>
<option value="Excelente">Excelente</option>
<option value="Bueno">Bueno</option>
<option value="Regular">Regular</option>
<option value="Malo">Malo</option>
</select>
</div>

<!-- Observaciones -->
<div class="mb-3">
<label for="equipoObservaciones" class="form-label">Observaciones</label>
<textarea class="form-control" id="equipoObservaciones" rows="3"
placeholder="Observaciones adicionales..."></textarea>
</div>
</form>
</div>
<div class="modal-footer">
<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
<i class="fas fa-times"></i> Cancelar
</button>
<button type="button" class="btn btn-primary" onclick="guardarEquipo()">
<i class="fas fa-save"></i> Guardar
</button>
</div>
</div>
</div>
</div>
<!-- Modal para configuraci√≥n de PC -->
<div class="modal fade" id="modalConfigurarPC" tabindex="-1">
<div class="modal-dialog modal-lg">
<div class="modal-content">
<div class="modal-header bg-primary text-white">
<h5 class="modal-title">
<i class="fas fa-desktop"></i> Configurar PC de Mesa
</h5>
<button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
</div>
<div class="modal-body">
<!-- Informaci√≥n de la mesa y PC -->
<div class="row mb-3">
<div class="col-md-6">
<h6 id="mesaInfo" class="fw-bold">Mesa: </h6>
</div>
<div class="col-md-6">
<h6 id="pcInfo" class="fw-bold">PC: </h6>
</div>
</div>

<!-- Informaci√≥n del curso -->
<div class="alert alert-info" id="cursoInfo" style="display: none;">
<i class="fas fa-info-circle"></i> Curso: <span id="cursoActual"></span>
</div>

<form id="formConfigurarPC">
<input type="hidden" id="mesaId" value="">
<input type="hidden" id="pcIndex" value="">
<input type="hidden" id="cursoMesa" value="">

<!-- Serial y Estudiante -->
<div class="row">
<div class="col-md-6">
<div class="mb-3">
<label class="form-label fw-bold">Serial del PC</label>
<input type="text" class="form-control" id="pcSerial"
placeholder="Ingrese el serial del PC">
</div>
</div>
<div class="col-md-6">
<div class="mb-3">
<label class="form-label fw-bold">Estudiante</label>
<select class="form-select" id="selectEstudiantePC"
onchange="cargarDatosEstudiantePC()">
<option value="">Seleccione un estudiante</option>
</select>
</div>
</div>
</div>

<!-- Nombre y Documento del Estudiante -->
<div class="row">
<div class="col-md-6">
<div class="mb-3">
<label class="form-label">Nombre del Estudiante</label>
<input type="text" class="form-control" id="pcEstudiante" readonly>
</div>
</div>
<div class="col-md-6">
<div class="mb-3">
<label class="form-label">Documento</label>
<input type="text" class="form-control" id="pcDocumento" readonly>
</div>
</div>
</div>

<!-- Estados del PC y perif√©ricos -->
<div class="row">
<div class="col-md-4">
<div class="mb-3">
<label class="form-label">Estado del PC</label>
<select class="form-select" id="pcEstado">
<option value="Excelente">Excelente</option>
<option value="Bueno">Bueno</option>
<option value="Regular">Regular</option>
<option value="Da√±ado">Da√±ado</option>
</select>
</div>
</div>
<div class="col-md-4">
<div class="mb-3">
<label class="form-label">Mouse</label>
<select class="form-select" id="pcMouse">
<option value="Excelente">Excelente</option>
<option value="Bueno">Bueno</option>
<option value="Regular">Regular</option>
<option value="Da√±ado">Da√±ado</option>
<option value="No tiene">No tiene</option>
</select>
</div>
</div>
<div class="col-md-4">
<div class="mb-3">
<label class="form-label">Teclado</label>
<select class="form-select" id="pcTeclado">
<option value="Excelente">Excelente</option>
<option value="Bueno">Bueno</option>
<option value="Regular">Regular</option>
<option value="Da√±ado">Da√±ado</option>
<option value="No tiene">No tiene</option>
</select>
</div>
</div>
</div>

<div class="row">
<div class="col-md-4">
<div class="mb-3">
<label class="form-label">Pantalla</label>
<select class="form-select" id="pcPantalla">
<option value="Excelente">Excelente</option>
<option value="Bueno">Bueno</option>
<option value="Regular">Regular</option>
<option value="Da√±ado">Da√±ado</option>
<option value="No tiene">No tiene</option>
</select>
</div>
</div>
<div class="col-md-4">
<div class="mb-3">
<label class="form-label">Internet</label>
<select class="form-select" id="pcInternet">
<option value="Funciona">Funciona</option>
<option value="No funciona">No funciona</option>
<option value="Lento">Lento</option>
</select>
</div>
</div>
<div class="col-md-4">
<div class="mb-3">
<label class="form-label">Limpieza</label>
<select class="form-select" id="pcLimpieza">
<option value="Excelente">Excelente</option>
<option value="Bueno">Bueno</option>
<option value="Regular">Regular</option>
<option value="Malo">Malo</option>
</select>
</div>
</div>
</div>

<!-- Observaciones -->
<div class="mb-3">
<label class="form-label">Observaciones</label>
<textarea class="form-control" id="pcObservaciones" rows="2"
placeholder="Observaciones adicionales..."></textarea>
</div>
</form>
</div>
<div class="modal-footer">
<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
<i class="fas fa-times"></i> Cancelar
</button>
<button type="button" class="btn btn-primary" onclick="guardarConfiguracionPC()">
<i class="fas fa-save"></i> Guardar
</button>
</div>
</div>
</div>
</div>
<!-- Modal para asignar silla -->
<div class="modal fade" id="modalAsignarSilla" tabindex="-1">
<div class="modal-dialog">
<div class="modal-content">
<div class="modal-header bg-primary text-white">
<h5 class="modal-title">
<i class="fas fa-chair"></i> Asignar Silla a Estudiante
</h5>
<button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
</div>
<div class="modal-body">
<!-- Indicador de estado de la silla -->
<div id="sillaOcupadaIndicator" class="badge bg-secondary mb-3 p-2" style="font-size: 1rem;">
Cargando...
</div>

<form id="formAsignarSilla">
<input type="hidden" id="sillaIndex" value="-1">
<input type="hidden" id="sillaId" value="">

<div class="mb-3">
<label for="sillaSerial" class="form-label">Serial de la Silla</label>
<input type="text" class="form-control" id="sillaSerial" readonly>
</div>

<div class="mb-3">
<label for="sillaNumero" class="form-label">N√∫mero de Silla</label>
<input type="text" class="form-control" id="sillaNumero" readonly>
</div>

<div class="mb-3">
<label for="selectEstudianteSilla" class="form-label">Seleccionar Estudiante</label>
<select class="form-select" id="selectEstudianteSilla"
onchange="cargarDatosEstudianteSilla()">
<option value="">-- Seleccione un estudiante --</option>
</select>
</div>

<div class="row">
<div class="col-md-6">
<div class="mb-3">
<label for="sillaEstudianteNombre" class="form-label">Nombre del Estudiante</label>
<input type="text" class="form-control" id="sillaEstudianteNombre" readonly>
</div>
</div>
<div class="col-md-6">
<div class="mb-3">
<label for="sillaEstudianteDocumento" class="form-label">Documento</label>
<input type="text" class="form-control" id="sillaEstudianteDocumento" readonly>
</div>
</div>
</div>

<div class="mb-3">
<label for="sillaEstado" class="form-label">Estado de la Silla</label>
<select class="form-select" id="sillaEstado">
<option value="Excelente">Excelente</option>
<option value="Bueno">Bueno</option>
<option value="Regular">Regular</option>
<option value="Malo">Malo</option>
</select>
</div>

<div class="mb-3">
<label for="sillaObservaciones" class="form-label">Observaciones</label>
<textarea class="form-control" id="sillaObservaciones" rows="2"
placeholder="Observaciones..."></textarea>
</div>
</form>
</div>
<div class="modal-footer">
<button type="button" class="btn btn-danger" onclick="desasignarSilla()">
<i class="fas fa-user-slash"></i> Desasignar
</button>
<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
<i class="fas fa-times"></i> Cancelar
</button>
<button type="button" class="btn btn-primary" onclick="guardarAsignacionSilla()">
<i class="fas fa-save"></i> Guardar
</button>
</div>
</div>
</div>
</div>

<!-- SCRIPTS - ORDEN CR√çTICO -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<!-- 1. CORE -->
<script src="js/core/dataManager.js"></script>
<script src="js/core/utils.js"></script>

<!-- 2. MODALES -->
<script src="js/modals/modalManager.js"></script>

<!-- 3. UI MANAGER -->
<script src="js/uiManager.js"></script>

<!-- 4. M√ìDULOS -->
<script src="js/modules/responsables.js"></script>
<script src="js/modules/puestos.js"></script>
<script src="js/modules/equipos.js"></script>
<script src="js/modules/sillas.js"></script>
<script src="js/modules/asistencia.js"></script>
<script src="js/reportes.js"></script>

<!-- 5. APP -->
<script src="js/app.js"></script>

<!-- DIAGN√ìSTICO FINAL -->
<script>
(function () {
const bar = document.getElementById('diagnosticoBar');
const updateBar = (msg, isError) => {
if (bar) {
bar.innerHTML += `<span class="${isError ? 'error' : 'ok'}">${msg}</span>`;
}
};

// Verificar despu√©s de 1 segundo
setTimeout(() => {
const checks = [
{ name: 'DataManager', obj: window.DataManager },
{ name: 'Utils', obj: window.Utils },
{ name: 'ModalManager', obj: window.ModalManager },
{ name: 'UIManager', obj: window.UIManager }
];

checks.forEach(c => {
const ok = typeof c.obj !== 'undefined';
updateBar(`${c.name}: ${ok ? '‚úÖ' : '‚ùå'}`, !ok);
});

if (typeof window.DataManager === 'undefined') {
console.error('‚ùå DataManager no cargado - Verifica que el archivo existe en js/core/dataManager.js');
}
}, 1000);
})();
</script>
</body>

</html>